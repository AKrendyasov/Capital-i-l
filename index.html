<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset= utf-8">
	<title>Главная страница</title>

	<style>

		* {
			margin: 0;
			padding: 0;

		}
		body {
			background:#d9d8d8;
		}
		#wrapper{
			width: 1415px;
			margin:0px;
			border: none;

		}
		#logo{
			border: none;

		}
		div {
			margin: 0px;
		}

		.img {
			line-height: 1px; /* Межстрочное расстояние */
		}

		#okno {
			width: 300px; /* Ширина */
			height: 600px;
			background: #d9d8d8; /* Цвет фона */
			padding: 20px; /* Поля */
			-moz-box-sizing: border-box; /* Для Firefox */
			-webkit-box-sizing: border-box; /* Для Safari и Chrome */
			box-sizing: border-box; /* Для IE и Opera */
			border: 100px ;
			float: left; /* Обтекание по правому краю */
		}

		#forma{

			width: 300px; /* Ширина слоя */
			margin: 0px; /* Значение отступов */
			border: 0px;  /* Параметры границы */
			padding: 0px;

		}
		select {
			width: 250px; /* Ширина списка в пикселах */
		}

		.simple-little-table {
			font-family:Arial, Helvetica, sans-serif;
			color:#666;
			font-size:10px;
			text-shadow: 1px 1px 0px #fff;
			background:#eaebec;
			margin:10px;
			border:#ccc 1px solid;
			border-collapse:separate;

			-moz-border-radius:3px;
			-webkit-border-radius:3px;
			border-radius:3px;

			-moz-box-shadow: 0 1px 2px #d1d1d1;
			-webkit-box-shadow: 0 1px 2px #d1d1d1;
			box-shadow: 0 1px 2px #d1d1d1;
		}

		.simple-little-table th {
			font-weight:bold;
			padding:16px 20px 17px 20px;
			border-top:1px solid #fafafa;
			border-bottom:1px solid #e0e0e0;

			background: #ededed;
			background: -webkit-gradient(linear, left top, left bottom, from(#ededed), to(#ebebeb));
			background: -moz-linear-gradient(top,  #ededed,  #ebebeb);
		}
		.simple-little-table th:first-child{
			text-align: left;
			padding-left:15px;
		}
		.simple-little-table tr:first-child th:first-child{
			-moz-border-radius-topleft:3px;
			-webkit-border-top-left-radius:3px;
			border-top-left-radius:3px;
		}
		.simple-little-table tr:first-child th:last-child{
			-moz-border-radius-topright:3px;
			-webkit-border-top-right-radius:3px;
			border-top-right-radius:3px;
		}
		.simple-little-table tr{
			text-align: center;
			padding-left:15px;
		}
		.simple-little-table tr td:first-child{
			text-align: left;
			padding-left:15px;
			border-left: 0;
		}
		.simple-little-table tr td {
			padding:14px;
			border-top: 1px solid #ffffff;
			border-bottom:1px solid #e0e0e0;
			border-left: 1px solid #e0e0e0;

			background: #fafafa;
			background: -webkit-gradient(linear, left top, left bottom, from(#fbfbfb), to(#fafafa));
			background: -moz-linear-gradient(top,  #fbfbfb,  #fafafa);
		}
		.simple-little-table tr:nth-child(even) td{
			background: #f6f6f6;
			background: -webkit-gradient(linear, left top, left bottom, from(#f8f8f8), to(#f6f6f6));
			background: -moz-linear-gradient(top,  #f8f8f8,  #f6f6f6);
		}
		.simple-little-table tr:last-child td{
			border-bottom:0;
		}
		.simple-little-table tr:last-child td:first-child{
			-moz-border-radius-bottomleft:3px;
			-webkit-border-bottom-left-radius:3px;
			border-bottom-left-radius:3px;
		}
		.simple-little-table tr:last-child td:last-child{
			-moz-border-radius-bottomright:3px;
			-webkit-border-bottom-right-radius:3px;
			border-bottom-right-radius:3px;
		}
		.simple-little-table tr:hover td{
			background: #f2f2f2;
			background: -webkit-gradient(linear, left top, left bottom, from(#f2f2f2), to(#f0f0f0));
			background: -moz-linear-gradient(top,  #f2f2f2,  #f0f0f0);
		}

		.simple-little-table a:link {
			color: #666;
			font-weight: bold;
			text-decoration:none;
		}
		.simple-little-table a:visited {
			color: #999999;
			font-weight:bold;
			text-decoration:none;
		}
		.simple-little-table a:active,
		.simple-little-table a:hover {
			color: #bd5a35;
			text-decoration:underline;
		}

		.clear {
			clear: left; /* Отмена обтекания */
		}
		td.red {
			color: red; /* Отмена обтекания */
		}
		caption.nameRep {
			font-family:Arial, Helvetica, sans-serif;
			font-size:25px;
			text-align: center;
			color: black; /* Отмена обтекания */
		}
	</style>

		<meta name="keywords" content="" />
		<meta name="description" content="" />
		<script   src="https://code.jquery.com/jquery-3.0.0.min.js"   integrity="sha256-JmvOoLtYsmqlsWxa7mDSLMwa6dZ9rrIdtrrVYRnDRH0="   crossorigin="anonymous"></script>
		<script>
			$(document).ready(function(){
				$("#writer").click(function () {
					var user=$("#user").val();
					$.post("/writer",{user:user}, function(data){
						var tableValue=JSON.parse(data);
						//Создаем создаем таблицу, крепим её к div, инициализируем и объявляем переменную для создания строк в таблице.
						var mytable = $('<table/>', {
							class: 'simple-little-table',
							cellspacing:'0'
						});
						$('.content').append(mytable);
						//

						$('.simple-little-table').append(
								$('<caption/>', {
									class: 'nameRep',
									text: "Отчет о выпадающих доходах"
								}),
								$('<tr/>', {
									class: 'hea'
								})
						);
/*						$('.nameRep').append(
								$('<th/>', {
									text: "Отчет о выпадающих доходах"
								}));*/

						$('.hea').append(

								$('<th/>', {
									text: "Адрес"
								}),
								$('<th/>', {
									text: "Год"
								}),
								$('<th/>', {
									text: "Месяц"
								}),
								$('<th/>', {
									text: "Количество владельцев льготы"
								}),
								$('<th/>', {
									text: "Количество пользующихся льготой"
								}),
								$('<th/>', {
									text: "Фактически занимаемся площадь"
								}),
								$('<th/>', {
									text: "Площадь для расчета льготы"
								}),
								$('<th/>', {
									text: "Оплата жилья (техническое обслуживание) на основную площадь"
								}),
								$('<th/>', {
									text: "Оплата жилья (техническое обслуживание) на излишки площади"
								}),
								$('<th/>', {
									text: "Плата за социальный наем"
								}),
								$('<th/>', {
									text: "Плата за коммерческий наем"
								}),
								$('<th/>', {
									text: "Плата за наем в бездотационных домах"
								}),
								$('<th/>', {
									text: "Отопление"
								}),
								$('<th/>', {
									text: "Капитальнй ремонт"
								}),
								$('<th/>', {
									text: "Водопровод и канализация"
								}),
								$('<th/>', {
									text: "ГВС"
								}),
								$('<th/>', {
									text: "Электроэнергия"
								}),
								$('<th/>', {
									text: "Сумма компенсации"
								}),
								$('<th/>', {
									text: "Сумма изменения"
								}),
								$('<th/>', {
									text: "Управляющая компания"
								}),
								$('<th/>', {
									text: "Наличие записи"
								})

						);
						$.each(tableValue, function (index, value) {

							var trVal=value;
							var DataCell = $('<tr/>');

							//Переопределяем строку

							$('.simple-little-table').append(DataCell);
							//Пробегаемся по строкам, создаем ячейки, присваиваем им id и содержимое.

							$.each(trVal, function (key, value) {
								if(trVal.recExistense==1){
									DataCell.append(
											$('<td/>', {
												text: value
											})
									);
								}else{
									DataCell.append(
										$('<td/>', {
											class:"red",
											text: value
										})
								);
								}


							});

						});

					})
				})

			});
		</script>
</head>
<body>
	<div id="wrapper">
		<div id="header">

			<div id="logo">
				<img src="img/logo1.png" alt="Логотип" width="1396" height="208" >

				<div style="width:20%; float:left" id="okno"><p>
				<p>
					<div id="forma" >
						<h2>Ввод данных</h2>
						<div class="box" >
							<form action="/" enctype="multipart/form-data" method="post">
								<input type="file" name="upload" multiple>
								<input type="submit" value="Загрузить">
							</form>

						</div>
						<h3>Вывод отчетов</h3>
						<form action="/writer" enctype="multipart/form-data" method="post">
							<div class="box">
								<p id="tablica">
									<select size="3" name="report" >
									<option disabled>Выберите отчет:</option>
									<option value='lostIncome'>По выпадающим доходам</option>
									</select>
								</p>
							</div>


							<div class="box">
								<p><select size="3" multiple name="controlCompany[]">
									<option disabled>Выберите управляющую организацию:</option>

									<option value='УК Городская'>УК Городская</option>

								</select></p>
							</div>

							<div class="box">
								<p><select size="3" multiple name="houseList[]">
									<option disabled>Выберите адрес:</option>
									<option value='Лермонтовский просп. 12'>Лермонтовский просп. 12</option>
								</select></p>
							</div>
<!--							<div class="box">
								<p><select size="3" multiple name="years[]">
									<option disabled>Выберите год:</option>
									<option value='2016'>2016</option>
									<option value='2015'>2015</option>
								</select></p>
							</div>-->

	<!--						<div class="box">
								<p><select size="3" multiple name="months[]">
									<option disabled>Выберите месяц:</option>
									<option value='1'>Январь</option>
									<option value='2'>Февраль</option>
									<option value='3'>Март</option>
									<option value='4'>Апрель</option>
									<option value='5'>Май</option>
									<option value='6'>Июнь</option>
									<option value='7'>Июль</option>
									<option value='8'>Август</option>
									<option value='9'>Сентябрь</option>
									<option value='10'>Октябрь</option>
									<option value='11'>Ноябрь</option>
									<option value='12'>Декабрь</option>
								</select></p>
							</div>-->

								<input type="button" id="writer" value="вывести отчет">
						</form>
				<br>
					</div>
				</div>
				<div style="width:80%; float:left" class="content">


				</div>
			</div>
		</div>

	</div>


		<div class="clear"></div>
		</div>

</body>
</html>